<odoo>
    <template id="sky_report_invoice" inherit_id="account.report_invoice_document">
        <xpath expr="//t" position="replace">
            <t t-call="web.basic_layout">
                <style>
                    th{ border: 1px solid #000; text-align:left; padding:0.1rem;
                    background-color: #D9D9D9;
                    }
                    td {
                    border: 1px solid #000; padding:0.45rem; text-align:left; }
                    .table-bordered
                    th, .table-bordered td{ border: 1px solid #000 !important; }
                    td.data-border{
                    border-left:hidden !important;
                    border-bottom:hidden !important;
                    vertical-align : top !important;
                    }
                </style>
                <div class="page" style="font-family:serif; font-size:14px !important;">
                    <t t-if="not o" t-set="o" t-value="doc" />
                    <t t-if="not company">
                        <t t-if="company_id">
                            <t t-set="company" t-value="company_id" />
                        </t>
                        <t t-elif="o and 'company_id' in o and o.company_id.sudo()">
                            <t t-set="company" t-value="o.company_id.sudo()" />
                        </t>
                        <t t-else="else">
                            <t t-set="company" t-value="res_company" />
                        </t>
                    </t>
                    <div class="row" style="align-items:center">
                        <div class="col-3 text-left">
                            <t t-if="company.logo">
                                <img t-if="company.logo" t-att-src="image_data_uri(company.logo)"
                                    style="height: 220px; width: 220px;" alt="Logo" />
                            </t>
                        </div>
                        <div class="col-9">
                            <div style="text-align:right; font-size:18px;">
                                <strong>Invoice</strong>
                            </div>
                            <table class="table-bordered" width="50%"
                                style="float:right; border: 1px solid #000 !important;">

                                <tr>
                                    <th class="text-center" width="40%%">
                                        DATE
                                    </th>
                                    <th class="text-center" width="40%">
                                        Facture /Invoice #
                                    </th>
                                </tr>
                                <tr>
                                    <td class="text-center"
                                        style="padding:0.1rem !important;">

                                        <span t-field="o.invoice_date"
                                            t-options='{"format": "M/d/YYYY"}' />
                                    </td>
                                    <td class="text-center"
                                        style="padding:0.1rem !important;">
                                        <div t-esc="o.name" />
                                    </td>
                                </tr>
                                <tr>
                                    <th class="text-center">
                                        TERMS
                                    </th>
                                    <th class="text-center">
                                        DUE DATE </th>
                                </tr>
                                <tr>
                                    <td class="text-center"
                                        style="padding:0.1rem !important;">
                                        <div t-esc="o.invoice_payment_term_id.name" />
                                    </td>
                                    <td class="text-center"
                                        style="padding:0.1rem !important;">
                                        <span t-field="o.invoice_date_due"
                                            t-options='{"format": "M/d/YYYY"}' />
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="row my-2">
                        <div class="col-6">
                            <div t-esc="o.company_id.name" />
                            <div>
                                <span t-esc="o.company_id.street" />
                                <span t-esc="o.company_id.street2" />
                            </div>
                            <div>
                                <span t-esc="o.company_id.city" />
                                <span t-esc="o.company_id.state_id.name" />
                                <span t-esc="o.company_id.zip" />
                            </div>
                            <div t-esc="o.company_id.country_id.code" />
                        </div>
                    </div>
                    <div class="row my-3">
                        <div class="col-6">
                            <table class="table-bordered" id="leftdiv" name="leftTable"
                                style="width:78%;float:left;">
                                <tr>
                                    <th class="text-center">
                                        Facture A /BILL TO
                                    </th>
                                </tr>
                                <tr style="height:100px !important; vertical-align:top;">
                                    <td style="background-color:#fff; color:#000;">
                                        <div t-if="o.partner_id">
                                            <div>
                                                <span t-esc="o.partner_id.name" />
                                            </div>
                                            <div>
                                                <span t-esc="o.partner_id.street" />
                                                <span t-esc="o.partner_id.street2" />
                                            </div>
                                            <div>
                                                <span t-esc="o.partner_id.city" />
                                                <span t-esc="o.partner_id.state_id.name" />
                                                <span t-esc="o.partner_id.zip" />
                                            </div>
                                            <div t-esc="o.partner_id.country_id.code" />
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-6">
                            <table class="table-bordered" id="rightdiv"
                                style="width:78%;float:right;">
                                <tr>
                                    <th class="text-center">
                                        Expedie A / SHIP TO

                                    </th>
                                </tr>
                                <tr style="height:100px !important; vertical-align:top;">
                                    <td style="background-color:#fff; color:#000;">
                                        <t t-if="o.partner_shipping_id">
                                            <div>
                                                <span t-esc="o.partner_shipping_id.street" />
                                                <span t-esc="o.partner_shipping_id.street2" />
                                            </div>
                                            <div>
                                                <span t-esc="o.partner_shipping_id.city" />
                                                <span t-esc="o.partner_shipping_id.state_id.name" />
                                                <span t-esc="o.partner_shipping_id.zip" />
                                            </div>
                                            <div t-esc="o.partner_shipping_id.country_id.code" />
                                        </t>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <table style="width:100%;margin-top:35px;" class="table-bordered">
                        <thead>
                            <tr>
                                <th name="th_description" class="text-center table-secondary"
                                    width="20%">
                                    <span>Item</span>
                                </th>
                                <th name="th_descripton" class="text-center table-secondary"
                                    width="40%">
                                    <span>Description</span>
                                </th>
                                <th name="th_quantity" class="text-center table-secondary"
                                    width="10%">
                                    <span>Qty</span>
                                </th>

                                <th name="th_priceunit" width="15%"
                                    t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                    <span>Prix / Rate</span>
                                </th>
                                <th name="th_subtotal" class="text-center table-secondary"
                                    width="15%">
                                    <span groups="account.group_show_line_subtotals_tax_excluded">
                                        Montant/Amt</span>
                                    <span groups="account.group_show_line_subtotals_tax_included">
                                        Montant/Amt</span>
                                </th>
                            </tr>
                        </thead>
                        <tbody class="invoice_tbody">

                            <t t-set="current_subtotal" t-value="0" />
                            <t t-set="discounted_value" t-value="0" />
                            <t t-set="lines"
                                t-value="o.invoice_line_ids.sorted(key=lambda l: (-l.sequence, l.date, l.move_name, -l.id), reverse=True)" />

                            <t
                                t-foreach="lines" t-as="line">
                                <t t-set="discounted_value"
                                    t-value="discounted_value + (line.price_unit * line.quantity *line.discount)/100" />

                                <t t-set="current_subtotal"
                                    t-value="current_subtotal + line.price_subtotal"
                                    groups="account.group_show_line_subtotals_tax_excluded" />
                                <t t-set="current_subtotal"
                                    t-value="current_subtotal + line.price_total"
                                    groups="account.group_show_line_subtotals_tax_included" />
                                <tr
                                    t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''">
                                    <t t-if="not line.display_type"
                                        name="account_invoice_line_accountable">
                                        <td name="account_invoice_line_name" class="text-left">
                                            <span t-field="line.product_id.name"
                                                t-options="{'widget': 'text'}" />
                                        </td>
                                        <td name="account_invoice_line_name">
                                            <span t-field="line.name" t-options="{'widget': 'text'}" />
                                        </td>
                                        <td class="text-center">
                                            <span t-field="line.quantity" />
                                            <span t-field="line.product_uom_id"
                                                groups="uom.group_uom" />   
                                        </td>
                                        <td
                                            t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }} ">
                                            <span class="text-nowrap" t-field="line.price_unit" />
                                            <span t-esc="o.currency_id.symbol" />
                                        </td>
                                        <td class="o_price_total text-center">
                                            <span class="text-nowrap" t-field="line.price_subtotal"
                                                groups="account.group_show_line_subtotals_tax_excluded" />
                                            <span class="text-nowrap" t-field="line.price_total"
                                                groups="account.group_show_line_subtotals_tax_included" />
                                        </td>
                                    </t>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                    <table width="100%">
                        <t t-set="tax_totals" t-value="json.loads(o.tax_totals_json)" />

                        <tr style="border-top: hidden;">
                            <td colspan="3" rowpsan="7" class="data-border"
                                style="vertical-align : top;" width="70%">
                                <div t-if="not print_with_payments">
                                    <div>GST/HST- Registration</div>
                                    <div>No: 805391174RT0001</div>
                                    <div>QST Registration</div>
                                    <div>No: 1221764923</div>
                                </div>
                            </td>
                            <td class="text-center" width="15%"
                                style="vertical-align : middle !important;">
                                SUBTOTAL
                            </td>
                            <td class="text-center" width="15%"  style="vertical-align : middle !important;">
                                <t t-esc="tax_totals['formatted_amount_untaxed']" />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" rowpsan="7" class="data-border"
                                style="vertical-align : top;" width="70%"></td>

                            <td class="text-center" width="15%">
                                TRANSPORT
                            </td>
                            <td class="text-center" width="15%"> 0.0 <span
                                    t-esc="o.currency_id.symbol" />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" rowpsan="7" class="data-border"
                                style="vertical-align : top;" width="70%"></td>
                            <td class="text-center" width="15%">
                                DISCOUNT
                            </td>
                            <td class="text-center" width="15%">
                                <t t-esc="discounted_value"
                                    t-options='{"widget": "monetary", "display_currency": o.currency_id}' />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" rowpsan="7" class="data-border"
                                style="vertical-align : top;" width="70%"></td>
                            <td class="text-center" width="15%">
                                Taxes /TAX
                            </td>
                            <td class="text-center" width="15%">
                                <span
                                    t-esc="tax_totals['amount_total'] - tax_totals['amount_untaxed'] "
                                    t-options='{"widget": "monetary", "display_currency": o.currency_id}' />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" rowpsan="7" class="data-border"
                                style="vertical-align : top;" width="70%"></td>
                            <td class="text-center" width="15%">
                                TOTAL
                            </td>
                            <td class="text-center" width="15%">
                                <t t-esc="tax_totals['formatted_amount_total']" />

                            </td>
                        </tr>
                        <tr t-attf-style="display:{{ '' if print_with_payments  else 'none'}}">
                            <td colspan="3" rowpsan="7" class="data-border"
                                style="vertical-align : top;" width="70%"></td>
                            <td class="text-center" width="15%">
                                PAYMENTS
                            </td>
                            <td class="text-center" width="15%">
                                <t t-set="payments_vals"
                                    t-value="o.sudo()._get_reconciled_info_JSON_values()" />
                                <t t-set="paid_amount" t-value="0" />

                                <t t-foreach="payments_vals" t-as="payment_vals">
                                    <t t-set="paid_amount" t-value="payment_vals['amount']" />
                                </t>
                                <t t-esc="paid_amount"
                                    t-options='{"widget": "monetary", "display_currency": o.currency_id}' />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" rowpsan="7" class="data-border"
                                style="verticle-align : top;" width="70%"></td>
                            <td class="text-center" width="15%">
                                BALANCE
                            </td>
                            <td class="text-center" width="15%">
                                <t t-esc="o.amount_residual"
                                    t-options='{"widget": "monetary", "display_currency": o.currency_id}' />
                            </td>
                        </tr>
                    </table>
                    <p style="page-break-inside: avoid;" />
                </div>
            </t>
        </xpath>
    </template>
</odoo>